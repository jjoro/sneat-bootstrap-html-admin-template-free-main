<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly To Do List</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* ===== 최소한의 커스텀 스타일 ===== */
        body {
            background-color: #f5f5f5;
        }

        h1 {
            letter-spacing: 3px;
            font-weight: 300;
        }

        .task-title {
            font-weight: 500;
        }

        .task-title:focus {
            outline: none;
        }

        .collapse-icon {
            font-size: 0.8rem;
            transition: transform 0.3s ease;
        }

        .collapse-icon.collapsed {
            transform: rotate(-90deg);
        }

        .task-details li.completed input[type="text"] {
            text-decoration: line-through;
            color: #999;
        }

        .note-area {
            resize: vertical;
        }
    </style>
</head>
<body>
    <div class="container-fluid px-3 py-5">
        <div class="container bg-white rounded shadow-sm p-5">
            <!-- ========================================
                 헤더 영역
            ======================================== -->
            <header>
                <h1 class="text-center mb-5">WEEKLY TO DO LIST</h1>
            </header>

            <!-- ========================================
                 바디 영역 - 상단 그리드 (월~목)
            ======================================== -->
            <main>
                <div class="row g-4 mb-4" id="topGrid"></div>

                <!-- ========================================
                     바디 영역 - 하단 그리드 (금~일 + NOTE)
                ======================================== -->
                <div class="row g-4 pt-4 border-top" id="bottomGrid"></div>
            </main>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // ========================================
        // 데이터 설정
        // ========================================
        const weekDays = {
            top: ['Monday', 'Tuesday', 'Wednesday', 'Thursday'],
            bottom: ['Friday', 'Saturday', 'Sunday']
        };

        const tasksPerDay = 7;
        const subTasksPerTask = 3;

        // ========================================
        // 함수: 요일 컬럼 생성
        // ========================================
        function createDayColumn(dayName) {
            const column = document.createElement('div');
            column.className = 'col-12 col-md-6 col-lg-3 border-end pe-3';
            
            const title = document.createElement('div');
            title.className = 'fs-6 text-secondary mb-3';
            title.textContent = dayName;
            column.appendChild(title);
            
            // 각 task-item 생성
            for (let i = 0; i < tasksPerDay; i++) {
                const taskItem = document.createElement('div');
                taskItem.className = 'mb-3 border rounded p-2 bg-light';
                
                // Task 헤더
                const taskHeader = document.createElement('div');
                taskHeader.className = 'd-flex align-items-center cursor-pointer user-select-none';
                taskHeader.style.cursor = 'pointer';
                
                const mainCheckbox = document.createElement('input');
                mainCheckbox.type = 'checkbox';
                mainCheckbox.className = 'form-check-input me-2 flex-shrink-0';
                
                const taskTitle = document.createElement('span');
                taskTitle.className = 'task-title flex-grow-1 small';
                taskTitle.textContent = `Task ${i + 1}`;
                taskTitle.contentEditable = true;
                
                const collapseIcon = document.createElement('span');
                collapseIcon.className = 'collapse-icon text-secondary ms-2';
                collapseIcon.textContent = '▼';
                
                taskHeader.appendChild(mainCheckbox);
                taskHeader.appendChild(taskTitle);
                taskHeader.appendChild(collapseIcon);
                
                // Sub-tasks 리스트
                const taskDetails = document.createElement('ul');
                taskDetails.className = 'task-details list-unstyled mt-2 ps-4 mb-0';
                
                // Sub-task 항목들
                for (let j = 0; j < subTasksPerTask; j++) {
                    const subTask = document.createElement('li');
                    subTask.className = 'd-flex align-items-center mb-2 p-2 bg-white rounded border';
                    
                    const subCheckbox = document.createElement('input');
                    subCheckbox.type = 'checkbox';
                    subCheckbox.className = 'form-check-input me-2';
                    
                    const subInput = document.createElement('input');
                    subInput.type = 'text';
                    subInput.className = 'form-control form-control-sm border-0 bg-transparent p-1';
                    subInput.placeholder = `Sub-task ${j + 1}`;
                    
                    subTask.appendChild(subCheckbox);
                    subTask.appendChild(subInput);
                    taskDetails.appendChild(subTask);
                    
                    // Sub-task 체크박스 이벤트
                    subCheckbox.addEventListener('change', function() {
                        if (this.checked) {
                            subTask.classList.add('completed');
                        } else {
                            subTask.classList.remove('completed');
                        }
                    });
                }
                
                taskItem.appendChild(taskHeader);
                taskItem.appendChild(taskDetails);
                column.appendChild(taskItem);
                
                // Bootstrap Collapse 적용
                const collapseId = `collapse-${dayName}-${i}`;
                taskDetails.id = collapseId;
                taskDetails.className += ' collapse show';
                
                // Collapse 토글 이벤트
                taskHeader.addEventListener('click', function(e) {
                    if (e.target === mainCheckbox || e.target === taskTitle) {
                        return;
                    }
                    const bsCollapse = new bootstrap.Collapse(taskDetails, {
                        toggle: true
                    });
                    collapseIcon.classList.toggle('collapsed');
                });
            }
            
            return column;
        }

        // ========================================
        // 함수: NOTE 섹션 생성
        // ========================================
        function createNoteSection() {
            const noteSection = document.createElement('div');
            noteSection.className = 'col-12 col-lg-3';
            
            const noteTitle = document.createElement('div');
            noteTitle.className = 'fs-6 text-secondary mb-3';
            noteTitle.textContent = 'NOTE';
            
            const noteArea = document.createElement('textarea');
            noteArea.className = 'note-area form-control';
            noteArea.placeholder = '메모를 입력하세요...';
            noteArea.rows = 10;
            
            noteSection.appendChild(noteTitle);
            noteSection.appendChild(noteArea);
            
            return noteSection;
        }

        // ========================================
        // 렌더링: 상단 그리드 (월~목)
        // ========================================
        function renderTopGrid() {
            const topGrid = document.getElementById('topGrid');
            weekDays.top.forEach(day => {
                topGrid.appendChild(createDayColumn(day));
            });
        }

        // ========================================
        // 렌더링: 하단 그리드 (금~일 + NOTE)
        // ========================================
        function renderBottomGrid() {
            const bottomGrid = document.getElementById('bottomGrid');
            
            // 금, 토, 일 추가
            weekDays.bottom.forEach(day => {
                bottomGrid.appendChild(createDayColumn(day));
            });
            
            // NOTE 섹션 추가
            bottomGrid.appendChild(createNoteSection());
        }

        // ========================================
        // 초기화: 페이지 로드 시 실행
        // ========================================
        function init() {
            renderTopGrid();
            renderBottomGrid();
        }

        // 페이지 로드 완료 후 초기화
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
